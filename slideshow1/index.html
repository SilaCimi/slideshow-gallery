<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slideshow Web App</title>
<style>
  body {
    margin: 0;
    background-color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
  }
  canvas {
    max-width: 100%;
    max-height: 100%;
    touch-action: none; /* previene gesture predefinite su mobile */
  }
</style>
</head>
<body>
<canvas id="slideshowCanvas"></canvas>

<script>
const canvas = document.getElementById('slideshowCanvas');
const ctx = canvas.getContext('2d');

let imagePaths = [
  'slideshow1/foto1.jpg',
  'slideshow1/foto2.jpg',
  'slideshow1/foto3.jpg',
  'slideshow1/foto4.jpg',
  'slideshow1/foto5.jpg'
];

let images = [];
let current = 0;
let autoAdvance = true;
let intervalTime = 5000;
let interval;

// Adatta canvas alla finestra
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  drawImage();
}
window.addEventListener('resize', resizeCanvas);

// Precarica immagini
imagePaths.forEach(src => {
  let img = new Image();
  img.src = src;
  images.push(img);
  img.onload = () => {
    if(current === 0) drawImage(); // Disegna la prima immagine quando caricata
  }
});

// Disegna immagine sul canvas
function drawImage() {
  const img = images[current];
  if (!img.complete) return;

  // scala proporzionalmente
  let scale = Math.min(canvas.width / img.width, canvas.height / img.height);
  let w = img.width * scale;
  let h = img.height * scale;
  let x = (canvas.width - w) / 2;
  let y = (canvas.height - h) / 2;

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(img, x, y, w, h);
}

// Passa all'immagine successiva
function nextImage() {
  current = (current + 1) % images.length;
  drawImage();
}

// Avanzamento automatico
function startAutoAdvance() {
  interval = setInterval(() => {
    if(autoAdvance) nextImage();
  }, intervalTime);
}

// Tap o click per avanzare
canvas.addEventListener('pointerdown', (e) => {
  autoAdvance = false; // ferma temporaneamente l'avanzamento automatico
  nextImage();
});

canvas.addEventListener('pointerup', () => {
  autoAdvance = true; // riprende l'avanzamento automatico
});

resizeCanvas();
startAutoAdvance();
</script>
</body>
</html>
