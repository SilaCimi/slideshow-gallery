<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slideshow Interattivo Canvas</title>
<style>
  body {
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #000;
    user-select: none; /* blocca selezione testo/elementi */
    touch-action: none; /* disabilita gesture default su mobile */
  }
  canvas {
    max-width: 90%;
    max-height: 90%;
    border-radius: 10px;
    display: block;
  }
</style>
</head>
<body>
<canvas id="slideshowCanvas"></canvas>

<script>
const imagesSrc = ["foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg","foto5.jpg"];
let images = [];
let currentIndex = 0;
let isPressed = false;
const duration = 5000; // 5 secondi
let timeoutId;
const canvas = document.getElementById('slideshowCanvas');
const ctx = canvas.getContext('2d');

// Funzione per ridimensionare canvas in base al viewport
function resizeCanvas() {
  canvas.width = window.innerWidth * 0.9;
  canvas.height = window.innerHeight * 0.9;
  drawImage();
}
window.addEventListener('resize', resizeCanvas);

// Precarica immagini
imagesSrc.forEach(src => {
  const img = new Image();
  img.src = src;
  images.push(img);
});

// Disegna l'immagine corrente sul canvas
function drawImage() {
  const img = images[currentIndex];
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const ratio = Math.min(canvas.width/img.width, canvas.height/img.height);
  const w = img.width * ratio;
  const h = img.height * ratio;
  ctx.drawImage(img, (canvas.width - w)/2, (canvas.height - h)/2, w, h);
}

// Passa all'immagine successiva
function nextImage() {
  currentIndex = (currentIndex + 1) % images.length;
  drawImage();
  scheduleNext();
}

// Gestione slideshow automatico
function scheduleNext() {
  clearTimeout(timeoutId);
  if (!isPressed) {
    timeoutId = setTimeout(nextImage, duration);
  }
}

// Gestione tap/click per avanzare
canvas.addEventListener('click', nextImage);

// Gestione "tenendo premuto"
canvas.addEventListener('mousedown', () => { isPressed = true; clearTimeout(timeoutId); });
canvas.addEventListener('mouseup', () => { isPressed = false; scheduleNext(); });

// Touch per dispositivi mobili
canvas.addEventListener('touchstart', () => { isPressed = true; clearTimeout(timeoutId); });
canvas.addEventListener('touchend', () => { isPressed = false; scheduleNext(); });

// Avvia canvas
window.onload = () => {
  resizeCanvas();
  scheduleNext();
};
</script>
</body>
</html>

